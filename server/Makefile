DBGFLAGS ?= -g -Wall
DUSE_AESD_CHAR_DEVICE ?= -DUSE_AESD_CHAR_DEVICE=1
DBGBUILDFLAGS ?= -DDEBUG_ON
LDFLAGS ?=-lpthread
CFLAGS += -I../aesd-char-driver
SRC ?= aesdsocket.c
OBJ ?= aesdsocket

default:
	$(CROSS_COMPILE) $(CC) $(DBGFLAGS) $(LDFLAGS) ${CFLAGS} $(DUSE_AESD_CHAR_DEVICE) -o $(OBJ) $(SRC)
all:
	$(CROSS_COMPILE) $(CC) $(DBGFLAGS) $(LDFLAGS) ${CFLAGS} $(DUSE_AESD_CHAR_DEVICE) -o $(OBJ) $(SRC)
debug:
	$(CROSS_COMPILE) $(CC) $(DBGFLAGS) $(LDFLAGS) ${CFLAGS} $(DBGBUILDFLAGS) $(DUSE_AESD_CHAR_DEVICE) -o $(OBJ) $(SRC)
debug_no_char_device:
	$(CROSS_COMPILE) $(CC) $(DBGFLAGS) $(LDFLAGS) ${CFLAGS} $(DBGBUILDFLAGS) -o $(OBJ) $(SRC) -DUSE_AESD_CHAR_DEVICE=0
no_char_device:
	$(CROSS_COMPILE) $(CC) $(DBGFLAGS) $(LDFLAGS) ${CFLAGS} -o $(OBJ) $(SRC) -DUSE_AESD_CHAR_DEVICE=0

clean:
	rm -f *.o aesdsocket
